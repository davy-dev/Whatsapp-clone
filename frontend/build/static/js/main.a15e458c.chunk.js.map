{"version":3,"sources":["firebase.js","StateProvider.js","Chat.js","SidebarChat.js","Sidebar.js","reducer.js","Login.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","auth","provider","GoogleAuthProvider","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","Chat","useState","input","setInput","roomId","useParams","roomName","setRoomName","messages","setMessages","user","useEffect","collection","doc","onSnapshot","snapshot","data","name","orderBy","docs","map","className","Avatar","Date","length","timestamp","toDate","toUTCString","IconButton","SearchOutlined","AttachFile","MoreVert","message","index","displayName","InsertEmoticon","onChange","e","target","placeholder","type","onClick","preventDefault","add","FieldValue","serverTimestamp","SidebarChat","id","addNewChat","prompt","to","Sidebar","rooms","setRooms","unsubscribe","src","photoURL","room","actionTypes","state","action","console","log","Login","dispatch","alt","Button","signInWithPopup","then","result","catch","err","alert","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a15e458c.chunk.js","sourcesContent":["import firebase from \"firebase\"\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyClnmlH3nfr-la8oVVCxdhrnMPOoJZbbE0\",\r\n    authDomain: \"whatsapp-clone-mern-bcada.firebaseapp.com\",\r\n    projectId: \"whatsapp-clone-mern-bcada\",\r\n    storageBucket: \"whatsapp-clone-mern-bcada.appspot.com\",\r\n    messagingSenderId: \"964915110639\",\r\n    appId: \"1:964915110639:web:efec0d1b755e59c3b8f11a\"\r\n  };\r\n\r\n  const firebaseApp=firebase.initializeApp(firebaseConfig)\r\n\r\n  const db=firebaseApp.firestore()\r\n\r\n  const auth=firebase.auth()\r\n\r\n  const provider=new firebase.auth.GoogleAuthProvider()\r\n\r\n  export {auth,provider}\r\n  export default db","import React,{createContext,useContext,useReducer} from \"react\"\r\n\r\nexport const StateContext = createContext()\r\n\r\nexport const StateProvider=({reducer,initialState,children})=>(\r\n    <StateContext.Provider value={useReducer(reducer,initialState)}>\r\n        {children}\r\n    </StateContext.Provider>\r\n)\r\n\r\nexport const useStateValue = ()=> useContext(StateContext)","import React, { useEffect, useState } from \"react\";\r\nimport { Avatar, IconButton } from \"@material-ui/core\";\r\nimport \"./Chat.css\";\r\nimport {\r\n  AttachFile,\r\n  InsertEmoticon,\r\n  MoreVert,\r\n  SearchOutlined,\r\n} from \"@material-ui/icons\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport db from \"./firebase\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport firebase from \"firebase\";\r\n\r\nexport default function Chat() {\r\n  const [input, setInput] = useState(\"\");\r\n  const { roomId } = useParams();\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [{ user }, dispatch] = useStateValue();\r\n\r\n  useEffect(() => {\r\n    if (roomId) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .onSnapshot((snapshot) => setRoomName(snapshot.data().name));\r\n\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"asc\")\r\n        .onSnapshot((snapshot) =>setMessages(snapshot.docs.map((doc) => doc.data()) )\r\n          \r\n        );\r\n    }\r\n  }, [roomId]);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n\r\n    db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({\r\n      message: input,\r\n      name: user.displayName,\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n    });\r\n    setInput(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"Chat\">\r\n      <div className=\"chat-header\">\r\n        <Avatar />\r\n        <div className=\"chat-headerInfo\">\r\n          <h3>{roomName}</h3>\r\n          <p>Last seen at{\" \"} \r\n          {new Date(messages[messages.length-1]?.timestamp?.toDate()).toUTCString()}</p> \r\n        </div>\r\n        <div className=\"chat-headerRight\">\r\n          <IconButton>\r\n            <SearchOutlined />\r\n          </IconButton>\r\n          <IconButton>\r\n            <AttachFile />\r\n          </IconButton>\r\n          <IconButton>\r\n            <MoreVert />\r\n          </IconButton>\r\n        </div>\r\n      </div>\r\n      <div className=\"chat-body\">\r\n        {messages.map((message, index) => (\r\n          <p\r\n            key={index}\r\n            className={`chat-message  ${\r\n              message.name === user.displayName && \"chat-reciever\"\r\n            }`}\r\n          >\r\n            <span className=\"chat-name\">{message.name}</span>\r\n            {message.message}\r\n            <span className=\"chat-timestamp\">\r\n              {new Date(message.timestamp?.toDate()).toUTCString()}\r\n            </span>\r\n          </p>\r\n        ))}\r\n      </div>\r\n      <div className=\"chat-footer\">\r\n        <InsertEmoticon />\r\n        <form>\r\n          <input\r\n            value={input}\r\n            onChange={e => setInput(e.target.value)}\r\n            placeholder=\"Type a message\"\r\n            type=\"text\"\r\n          />\r\n          <button onClick={sendMessage} \r\n          type=\"submit\" >\r\n            Send a message\r\n          </button>\r\n        </form>\r\n        <MicIcon />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect,useState } from \"react\";\r\nimport { Avatar } from \"@material-ui/core\";\r\nimport \"./SidebarChat.css\";\r\nimport db from \"./firebase\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function SidebarChat({ id, name, addNewChat }) {\r\n  const [messages,setMessages]=useState(\"\")\r\nuseEffect(()=>{\r\n  if(id){\r\n    db.collection(\"rooms\").doc(id).collection(\"messages\").orderBy(\"timestamp\",\"desc\").onSnapshot(\r\n      snapshot=>(\r\n          setMessages(snapshot.docs.map((doc)=>\r\n            doc.data()\r\n          ))\r\n      )\r\n    )\r\n  }\r\n},[id])\r\n\r\n  const createChat = () => {\r\n    const roomName = prompt(\"Entrer un nom de groupe\");\r\n    if (roomName) {\r\n      db.collection(\"rooms\").add({\r\n        name: roomName,\r\n      });\r\n    }\r\n  };\r\n\r\n  return !addNewChat ? (\r\n    <Link to={`/rooms/${id}`}>\r\n      {\" \"}\r\n      <div className=\"SidebarChat\">\r\n        <Avatar />\r\n        <div className=\"sidebarChat-info\">\r\n          <h2>{name}</h2>\r\n          <p>{messages[0]?.message}</p>\r\n        </div>\r\n      </div>{\" \"}\r\n    </Link>\r\n  ) : (\r\n    <div onClick={createChat} className=\"SidebarChat\">\r\n      <h2>Add new Chat</h2>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport \"./Sidebar.css\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\nimport DonutLargeIcon from \"@material-ui/icons/DonutLarge\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\nimport { Avatar, IconButton } from \"@material-ui/core\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport db from \"./firebase\";\r\nimport { useStateValue } from \"./StateProvider\";\r\n\r\nexport default function Sidebar() {\r\n  const [rooms, setRooms] = useState([]);\r\n  const [{ user }, dispatch] = useStateValue();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = db.collection(\"rooms\").onSnapshot((snapshot) => {\r\n      setRooms(\r\n        snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          data: doc.data(),\r\n        }))\r\n      );\r\n    });\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"Sidebar\">\r\n      <div className=\"sidebar-header\">\r\n        <Avatar src={user.photoURL} />\r\n\r\n        <div className=\"sidebar-headerRight\">\r\n          <IconButton>\r\n            <DonutLargeIcon />\r\n          </IconButton>\r\n          <IconButton>\r\n            <ChatIcon />\r\n          </IconButton>\r\n          <IconButton>\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        </div>\r\n      </div>\r\n      <div className=\"sidebar-search\">\r\n        <div className=\"sidebar-searchContainer\">\r\n          <SearchOutlined />\r\n          <input placeholder=\"Search or start new chat\" type=\"text\" />\r\n        </div>\r\n      </div>\r\n      <div className=\"sidebar-chats\">\r\n        <SidebarChat addNewChat />\r\n        {rooms.map((room) => (\r\n          <SidebarChat key={room.id} id={room.id} name={room.data.name} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export const initialState={\r\n    user:null,\r\n}\r\n\r\nexport const actionTypes={\r\n    SET_USER:\"SET_USER\"\r\n}\r\n\r\nconst reducer=(state,action)=>{\r\n    console.log(action)\r\n    switch(action.type){\r\n        case actionTypes.SET_USER:\r\n            return{\r\n                ...state,\r\n                user:action.user\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport default reducer","import { Button } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { auth, provider } from \"./firebase\";\r\nimport \"./Login.css\";\r\nimport { actionTypes } from \"./reducer\";\r\nimport { useStateValue } from \"./StateProvider\";\r\n\r\nexport default function Login() {\r\n  const [{}, dispatch] = useStateValue();\r\n\r\n  const signIn = () => {\r\n    auth\r\n      .signInWithPopup(provider)\r\n      .then((result) =>{\r\n        dispatch({\r\n            type:actionTypes.SET_USER,\r\n            user:result.user\r\n        })\r\n      })\r\n      .catch((err) => alert(err.message));\r\n  };\r\n  return (\r\n    <div className=\"Login\">\r\n      <div className=\"login-container\">\r\n        <img\r\n          src=\"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg\"\r\n          alt=\"loginIcon\"\r\n        />\r\n        <div className=\"login-text\">\r\n          <h1>Sign in to WhatsApp</h1>\r\n        </div>\r\n        <Button onClick={signIn}>Sign in with Google</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\nimport \"./App.css\";\nimport Chat from \"./Chat\";\nimport Sidebar from \"./Sidebar\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Login from \"./Login\";\nimport { useStateValue } from \"./StateProvider\";\n\nfunction App() {\n \n  const [{ user }, dispatch] = useStateValue();\n\n  return (\n    <div className=\"App\">\n      {!user ? (\n        <Login />\n      ) : (\n        <div className=\"App-body\">\n          <Router>\n            <Sidebar />\n            <Switch>\n              <Route path=\"/rooms/:roomId\">\n                <Chat />\n              </Route>\n              <Route path=\"/\">\n                <Chat />\n              </Route>\n            </Switch>\n          </Router>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { StateProvider } from './StateProvider';\nimport reducer,{initialState} from \"./reducer\"\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider \n    initialState={initialState}\n    reducer={reducer}>\n    <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}